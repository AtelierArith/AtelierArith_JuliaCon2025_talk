---
title: Let's read Julia documentation in your preferred language
author: SatoshiTerasaki@AtelierArith
format:
  revealjs:
    theme: "black"
    css: "../styles/style.css"
    embed-resources: true
    slide-number: true
    show-notes: separate-page
    mermaid:
      theme: default
    gfm:
    mermaid-format: png
---

# æ¦‚è¦

- DocstringTranslation.jl ã®ç´¹ä»‹
- Julia ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å¤šè¨€èªç¿»è¨³
- ãƒ‡ãƒ¢ã‚’å®Ÿè¡Œ

---

## èƒŒæ™¯ãƒ»èª²é¡Œ

- Julia ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ **è‹±èª** ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹
- æœ€æ–°æƒ…å ±ã¯è‹±èªã§ã—ã‹æä¾›ã•ã‚Œãªã„
- éè‹±èªåœã®é–‹ç™ºè€…ã«ã¨ã£ã¦è‹±èªã®èª­è§£ãƒ»è­°è«–ã¯å¿ƒç†çš„ãƒ»æ™‚é–“çš„ã‚³ã‚¹ãƒˆãŒé«˜ã„
- ç¿»è¨³ä½œæ¥­ã¯æ™‚é–“ãŒã‹ã‹ã‚‹

**è§£æ±ºç­–**: æ©Ÿæ¢°ç¿»è¨³ã‚’æ´»ç”¨ã—ãŸè‡ªå‹•ç¿»è¨³ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰
- DocstringTranslation.jl ğŸ˜

---

## What is DocstringTranslation.jl?

Julia ã® docstring ã‚’å¥½ããªè¨€èªã«ç¿»è¨³ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

:::: {.columns}

::: {.column width="50%"}

`@doc exp` (Original)

```julia
julia> @doc exp
  exp(x)

  Compute the natural base exponential of x, in other words â„¯^x.

  See also exp2, exp10 and cis.

  Examples
  â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡

  julia> exp(1.0)
  2.718281828459045

  julia> exp(im * pi) â‰ˆ cis(pi)
  true

  exp(A::AbstractMatrix)

  Compute the matrix exponential of A, defined by

  e^A = \sum_{n=0}^{\infty} \frac{A^n}{n!}.

  For symmetric or Hermitian A, an eigendecomposition (eigen) is used, otherwise the scaling and squaring algorithm
  (see [^H05]) is chosen.

  â”‚ [^H05]
  â”‚
  â”‚  Nicholas J. Higham, "The squaring and scaling method for the matrix exponential revisited", SIAM Journal
  â”‚  on Matrix Analysis and Applications, 26(4), 2005, 1179-1193. doi:10.1137/090768539
  â”‚  (https://doi.org/10.1137/090768539)

  Examples
  â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡â‰¡

  julia> A = Matrix(1.0I, 2, 2)
  2Ã—2 Matrix{Float64}:
   1.0  0.0
   0.0  1.0

  julia> exp(A)
  2Ã—2 Matrix{Float64}:
   2.71828  0.0
   0.0      2.71828

```
:::

::: {.column width="50%"}

`@doc exp` (Translated into Japanese)

```julia
julia> ENV["OPENAI_API_KEY"] = "sk-<blah>"
julia> using DocstringTranslation
julia> @switchlang! :ja
julia> @doc exp
  exp(x)

  xã®è‡ªç„¶åŸºåº•æŒ‡æ•°ã‚’è¨ˆç®—ã—ã¾ã™ã€‚è¨€ã„æ›ãˆã‚Œã°ã€â„¯^xã§ã™ã€‚

  ä»–ã«exp2ã€exp10ã€ãŠã‚ˆã³cisã‚‚å‚ç…§ã—ã¦ãã ã•ã„ã€‚

  ä¾‹
  â‰¡â‰¡

  julia> exp(1.0)
  2.718281828459045

  julia> exp(im * pi) â‰ˆ cis(pi)
  true

  exp(A::AbstractMatrix)

  è¡Œåˆ— A ã®è¡Œåˆ—æŒ‡æ•°é–¢æ•°ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ã“ã‚Œã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¾ã™ã€‚

  e^A = \sum_{n=0}^{\infty} \frac{A^n}{n!}.

  å¯¾ç§°è¡Œåˆ—ã¾ãŸã¯ã‚¨ãƒ«ãƒŸãƒ¼ãƒˆè¡Œåˆ— A
  ã®å ´åˆã¯ã€å›ºæœ‰åˆ†è§£ï¼ˆeigenï¼‰ãŒä½¿ç”¨ã•ã‚Œã€ãã‚Œä»¥å¤–ã®å ´åˆã¯ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã¨å¹³æ–¹åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒé¸æŠã•ã‚Œã¾ã™ï¼ˆ[^\H05]ã‚’å‚ç…§ï¼‰ã€‚

  â”‚ [^H05]
  â”‚
  â”‚  Nicholas J. Higham, "The squaring and scaling method for the matrix exponential revisited", SIAM Journal
  â”‚  on Matrix Analysis and Applications, 26(4), 2005, 1179-1193. doi:10.1137/090768539
  â”‚  (https://doi.org/10.1137/090768539)

  ä¾‹
  â‰¡â‰¡

  julia> A = Matrix(1.0I, 2, 2)
  2Ã—2 Matrix{Float64}:
   1.0  0.0
   0.0  1.0

  julia> exp(A)
  2Ã—2 Matrix{Float64}:
   2.71828  0.0
   0.0      2.71828
```
:::

::::

---

## What is DocstringTranslation.jl?

<video controls>
  <source src="assets/demo.mov" type="video/mp4">
</video>


---

## ç¿»è¨³ã®ä»•çµ„ã¿

- `@switchlang! :ja` ã¯ `Docs.parsedoc(d::DocStr)` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä¸Šæ›¸ãã™ã‚‹ï¼

```julia
# Rough sketch
@eval function Docs.parsedoc(d::DocStr)
    if d.object === nothing
        md = Docs.formatdoc(d)
        md.meta[:module] = d.data[:module]
        md.meta[:path] = d.data[:path]
        begin # hack
          translated_md = translate_docstring_with_openai(md)
        end # hack
        d.object = translated_md
    end
    d.object
end
```

See the [actual implementation](https://github.com/AtelierArith/DocstringTranslation.jl/blob/77eb4e187d30c9e82a0e4f078742b5c2af7f0845/src/switchlang.jl#L24-L51) to learn more.

---

## Docstrings on IJulia.jl

We can read translated docstrings on Jupyter

![](assets/jupyter_eigen.png)

---

## Live Docs on Pluto.jl

We can read translated docstrings on Pluto

![](assets/pluto_eigen.png)

---

### Translation of Documenter.jl based documents

```diff
--- a/docs/make.jl
+++ b/docs/make.jl
@@ -4,6 +4,10 @@ using DocumenterCitations
 # `using SpecialFunctions` for all doctests
 DocMeta.setdocmeta!(SpecialFunctions, :DocTestSetup, :(using SpecialFunctions); recursive=true)

+using DocstringTranslation
+@switchlang! :ja
+DocstringTranslation.switchtargetpackage!(SpecialFunctions)
+
 bib = CitationBibliography(
        joinpath(@__DIR__, "src", "refs.bi
b");
        style = :authoryear,
```

---

### Translation of Documenter.jl based documents

![](assets/gamma_documenter.png)

---

## Julia ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã®ç¿»è¨³çµæœ

**å¤šè¨€èª Julia ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:

- [æ—¥æœ¬èª](https://atelierarith.github.io/UnofficialJuliaDoc-ja/)
- [éŸ“å›½èª](https://atelierarith.github.io/UnofficialJuliaDoc-ko/)
- [ä¸­å›½èª](https://atelierarith.github.io/UnofficialJuliaDoc-zh/)
- [ãƒ‰ã‚¤ãƒ„èª](https://atelierarith.github.io/UnofficialJuliaDoc-de/)
- [ãƒ•ãƒ©ãƒ³ã‚¹èª](https://atelierarith.github.io/UnofficialJuliaDoc-fr/)
- [ã‚¹ãƒšã‚¤ãƒ³èª](https://atelierarith.github.io/UnofficialJuliaDoc-es/)
- [ã‚¢ãƒ©ãƒ“ã‚¢èª](https://atelierarith.github.io/UnofficialJuliaDoc-ar/)
- [ãƒ­ã‚·ã‚¢èª](https://atelierarith.github.io/UnofficialJuliaDoc-ru/)

---

## ç¿»è¨³çµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã¤ã„ã¦

- Scratch.jl ã‚’ä½¿ã£ã¦ç¿»è¨³çµæœã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ä¿å­˜
- REPL ã®èµ·å‹•æ™‚ã«æ¯å› API ã‚’å‘¼ã³å‡ºã™ã“ã¨ã‚’æŠ‘åˆ¶ã™ã‚‹
- `<lang>.md` (e.g., `ja.md`) ã‚’ç·¨é›†ã™ã‚‹ã“ã¨ã§ç¿»è¨³çµæœã‚’ä¿®æ­£ãŒå¯èƒ½
- ç¿»è¨³çµæœã‚’ãƒ¦ãƒ¼ã‚¶é–“ã§å…±æœ‰å¯èƒ½

```
$ tree ~/.julia/scratchspaces/d404e13b-1f8e-41a5-a26a-0b758a0c6c97/translation
â”œâ”€â”€ Base
â”‚   â””â”€â”€ 1.11
â”‚       â””â”€â”€ Math
â”‚           â””â”€â”€ 77be4ada26c623c913ebbdae5d8450a4dfe8f3cbf67837faac9d7193342d2bfe
â”‚               â”œâ”€â”€ ja.md
â”‚               â””â”€â”€ original.md
â””â”€â”€ LinearAlgebra
    â””â”€â”€ 1.11
        â””â”€â”€ 46c0494a8a2adffc6f71752b60448da1743997b5b1791b71e3830113e9b9cc46
            â”œâ”€â”€ ja.md
            â””â”€â”€ original.md

8 directories, 4 files
```

---

## Google Colab

ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å…±æœ‰ã™ã‚‹ã“ã¨ã§ OPENAI_API_KEY ãŒãªã„ç’°å¢ƒã§ã‚‚å‹•ä½œã‚’å¯èƒ½ã«ã™ã‚‹

![](assets/google_colab.png)

---

## ãã®ä»–

- DocstringTranslationOllamaBackend.jl (Ollama ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰)

---

## ãƒ‡ãƒ¢

å®Ÿéš›ã«ç¿»è¨³æ©Ÿèƒ½ã‚’å‹•ã‹ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼

---

## ã¾ã¨ã‚

- Julia ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å¤šè¨€èªåŒ–ã‚’å®Ÿç¾
- docstring ã¨ Documenter.jl ã®ä¸¡æ–¹ã«å¯¾å¿œ
- ç¿»è¨³çµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã§åŠ¹ç‡åŒ–
- è¤‡æ•°ã®ç¿»è¨³ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆ

**ä»Šå¾Œã®å±•æœ›**:
- ç¿»è¨³å“è³ªã®å‘ä¸Š
- ã‚ˆã‚Šå¤šãã®è¨€èªã¸ã®å¯¾å¿œ
- ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã®ç¿»è¨³çµæœå…±æœ‰

---

## ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ

**ãƒªãƒã‚¸ãƒˆãƒª**:

- [DocstringTranslation.jl](https://github.com/AtelierArith/DocstringTranslation.jl)

